{% extends 'shop/base.html' %}
{% load i18n static %}

{% block content %}
<!-- Collection Mood Page -->
<section class="mood-collection">
    
    <!-- Hero Banner -->
    <div class="mood-hero{% if not collection.banner %} mood-hero--no-image{% endif %}">
        {% if collection.banner %}
        <div class="mood-hero__image-wrapper">
            <img src="{{ collection.banner.url }}" alt="{{ collection.display_name }}" class="mood-hero__image">
            <div class="mood-hero__overlay"></div>
        </div>
        {% endif %}
        <div class="mood-hero__content">
            <h1 class="mood-hero__title">{{ collection.display_name }}</h1>
            {% if collection.display_description %}
            <p class="mood-hero__description">{{ collection.display_description }}</p>
            {% endif %}
        </div>
    </div>

    <!-- Products Grid -->
    <div class="mood-products">
        <div class="mood-products__header">
            <h2 class="mood-products__subtitle">{% trans "Товари колекції" %}</h2>
            <span class="mood-products__count">{{ items|length }} {% trans "товарів" %}</span>
        </div>
        
        <div class="mood-grid">
            {% for item in items %}
            <article class="mood-card" data-animate="fade-up" style="--delay: {{ forloop.counter0|add:0.1 }}s">
                <div class="mood-card__image-wrapper">
                    <a href="{% url 'product_detail' item.candle.pk %}">
                        {% if item.candle.image %}
                        <img src="{{ item.candle.image.url }}" alt="{{ item.candle.display_name }}" class="mood-card__image">
                        {% else %}
                        <div class="mood-card__placeholder">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <rect x="3" y="3" width="18" height="18" rx="2"/>
                                <circle cx="8.5" cy="8.5" r="1.5"/>
                                <path d="M21 15l-5-5L5 21"/>
                            </svg>
                        </div>
                        {% endif %}
                    </a>
                    
                    {% if item.candle.is_on_sale %}
                    <span class="mood-card__badge mood-card__badge--sale">{% trans "Акція" %}</span>
                    {% endif %}
                    {% if item.candle.is_hit %}
                    <span class="mood-card__badge mood-card__badge--hit">{% trans "Хіт" %}</span>
                    {% endif %}
                </div>
                
                <div class="mood-card__content">
                    <h3 class="mood-card__title">
                        <a href="{% url 'product_detail' item.candle.pk %}">{{ item.candle.display_name }}</a>
                    </h3>
                    
                    <div class="mood-card__price-row">
                        {% if item.candle.is_on_sale and item.candle.discount_percent %}
                        <span class="mood-card__price mood-card__price--old">{{ item.candle.price }} ₴</span>
                        <span class="mood-card__price mood-card__price--sale">{{ item.candle.discounted_price }} ₴</span>
                        {% else %}
                        <span class="mood-card__price">{{ item.candle.price }} ₴</span>
                        {% endif %}
                    </div>
                    
                    <button class="mood-card__btn" data-add-to-cart="{{ item.candle.pk }}">
                        <span>{% trans "До кошика" %}</span>
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M6 6h15l-1.5 9h-12z"/>
                            <circle cx="9" cy="20" r="1"/>
                            <circle cx="18" cy="20" r="1"/>
                            <path d="M6 6L5 3H2"/>
                        </svg>
                    </button>
                </div>
            </article>
            {% empty %}
            <div class="mood-empty">
                <p>{% trans "У цій колекції поки немає товарів" %}</p>
            </div>
            {% endfor %}
        </div>
    </div>
    
    <!-- Back to collections -->
    <div class="mood-footer">
        <a href="{% url 'home' %}" class="mood-back-btn">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M19 12H5"/>
                <path d="M12 19l-7-7 7-7"/>
            </svg>
            <span>{% trans "Повернутися на головну" %}</span>
        </a>
    </div>
</section>
{% endblock %} 
